<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">
<title>Palworld ‚Äì Breeding Dex</title>
</head>

<body>
<header class="site-header">
  <div class="logo">üêæ Palworld Dex</div>

  <nav>
    <a href="index.html">Accueil</a>
    <a href="breeding.html">Breeding</a>
    <a href="types.html">Types</a>
    <a href="stats.html">Stats</a>
    <a href="about.html">√Ä propos</a>
  </nav>
</header>

<div class="detail-page" id="pals"></div>

<script>

  function show(data){
    const box = document.getElementById("pals");
    let params = new URLSearchParams(document.location.search);
    let id = params.get("id");
    const pal = data[id] ?? null
    const el = document.createElement("div");

    if (pal) {
      el.className = "detail-grid";
      document.title = pal.name;

      el.innerHTML = `
        <!-- Colonne gauche : infos Pal -->
        <div class="pal-info">

          <!-- Hero -->
          <div class="hero">
            <img src="${pal.imageWiki}" alt="${pal.name}">
            <div class="hero-info">
              <h1>${pal.name}</h1>
              <div class="types">
                ${pal.types.map(t => `
                  <div class="type">
                    <img src="${t.image}" width="20">
                    ${t.name}
                  </div>
                `).join("")}
              </div>
              <p class="desc">${pal.description}</p>
            </div>
          </div>

          <!-- Breeding -->
          <div class="section breeding-section">
            <h2>üê£ Breeding</h2>
            <div>Rank: ${pal.breeding.rank}</div>
            <div>Order: ${pal.breeding.order}</div>
            <div>Child eligible: ${pal.breeding.child_eligble}</div>
            <div>Male chance: ${pal.breeding.male_probability}%</div>
          </div>

          <!-- Stats -->
          <div class="section stats-section">
            <h2>üìä Stats</h2>
            <div>HP: ${pal.stats.hp}</div>
            <div>Defense: ${pal.stats.defense}</div>
            <div>Melee: ${pal.stats.attack.melee}</div>
            <div>Ranged: ${pal.stats.attack.ranged}</div>
            <div>Run speed: ${pal.stats.speed.run}</div>
            <div>Stamina: ${pal.stats.stamina}</div>
          </div>

          <!-- Drops -->
          <div class="section drops-section">
            <h2>üéÅ Drops</h2>
            ${pal.drops.map(d => `<div>${d}</div>`).join("")}
          </div>

          <!-- Aura -->
          <div class="section aura-section">
            <h2>‚ú® Aura</h2>
            <strong>${pal.aura.name}</strong>
            <p>${pal.aura.description}</p>
          </div>

          <!-- Skills -->
          <div class="section skills-section">
            <h2>‚öîÔ∏è Skills</h2>
            <div class="skills-grid">
              ${pal.skills.map(s => `
                <div class="skill">
                  <strong>Lv ${s.level} ‚Äì ${s.name}</strong>
                  <div>Type: ${s.type}</div>
                  <div>Power: ${s.power}</div>
                  <div>Cooldown: ${s.cooldown}s</div>
                  <p>${s.description}</p>
                </div>
              `).join("")}
            </div>
          </div>

        </div>

        <!-- Colonne droite : Maps -->
        <div class="pal-maps">
          <h2>üó∫Ô∏è Maps d'apparition</h2>
          <div class="map-box">
            <h4>Day</h4>
            <img src="${pal.maps.day}" alt="Day map">
          </div>
          <div class="map-box">
            <h4>Night</h4>
            <img src="${pal.maps.night}" alt="Night map">
          </div>
        </div>
      `;
    } else {
      el.className = "not-found";
      document.title = "Pal non trouv√©";

      el.innerHTML = `
        <div class="not-found-box">
          <h1>‚ùå Pal non trouv√©</h1>
          <p>Le Pal que vous recherchez n'existe pas.</p>
          <a href="index.html" class="back-link">‚Üê Retour √† la liste</a>
        </div>
      `;
    }

    box.appendChild(el);

  }

  async function loadData() {
    const res = await fetch('data/palworld.json');
    const data = await res.json();
    show(data);
  }

  loadData()
</script>

</body>
</html>
